montageDefine("2fadc1d","lru-set",{dependencies:["./shim","./set","./generic-collection","./generic-set","./listen/property-changes","./listen/range-changes","lru-set"],factory:function(e,t,n){"use strict";function r(e,t,n,a,s){return this instanceof r?(t=t||1/0,n=n||Object.equals,a=a||Object.hash,s=s||Function.noop,this.store=new i(void 0,n,a),this.contentEquals=n,this.contentHash=a,this.getDefault=s,this.capacity=t,this.length=0,this.addEach(e),void 0):new r(e,t,n,a,s)}e("./shim");var i=e("./set"),a=e("./generic-collection"),s=e("./generic-set"),o=e("./listen/property-changes"),l=e("./listen/range-changes");n.exports=r,r.LruSet=r,Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,s.prototype),Object.addEach(r.prototype,o.prototype),Object.addEach(r.prototype,l.prototype),r.prototype.constructClone=function(e){return new this.constructor(e,this.capacity,this.contentEquals,this.contentHash,this.getDefault)},r.prototype.has=function(e){return this.store.has(e)},r.prototype.get=function(e,t){if(t)throw Error("LruSet#get does not support second argument: equals");return e=this.store.get(e),void 0!==e?(this.store["delete"](e),this.store.add(e)):e=this.getDefault(e),e},r.prototype.add=function(e){var t,n=this.store.has(e),r=[],i=[];return n?(this.store["delete"](e),this.store.add(e)):this.capacity>0&&(r.push(e),this.length>=this.capacity&&(t=this.store.order.head.next,i.push(t.value)),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(r,i,0),this.store.add(e),i.length>0&&this.store["delete"](t.value),this.length=this.length+r.length-i.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(r,i,0)),r.length!==i.length},r.prototype["delete"]=function(e,t){if(t)throw Error("LruSet#delete does not support second argument: equals");var n=this.store.has(e);return n&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],0),this.store["delete"](e),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],0)),n},r.prototype.one=function(){return this.length>0?this.store.one():void 0},r.prototype.clear=function(){this.store.clear(),this.length=0},r.prototype.reduce=function(e,t){var n=arguments[2],r=this.store,i=0;return r.reduce(function(t,r){return e.call(n,t,r,i++,this)},t,this)},r.prototype.reduceRight=function(e,t){var n=arguments[2],r=this.store,i=this.length-1;return r.reduceRight(function(t,r){return e.call(n,t,r,i--,this)},t,this)},r.prototype.iterate=function(){return this.store.iterate()}}});