montageDefine("2fadc1d","listen/array-changes",{dependencies:["../shim","../list","weak-map","./property-changes","./range-changes","./map-changes"],factory:function(e){function t(e){for(var t in e)Object.defineProperty(Array.prototype,t,{value:e[t],writable:!0,configurable:!0,enumerable:!1})}e("../shim"),e("../list"),e("weak-map");var n=e("./property-changes"),r=e("./range-changes"),i=e("./map-changes");Array.prototype.splice;var a=Array.prototype.slice;Array.prototype.reverse;var s,o=Array.prototype.sort,l=Array.prototype.swap,c=[],u={}.__proto__===Object.prototype;s=u?function(){this.__proto__=d}:function(){Object.defineProperties(this,h)},Object.defineProperty(Array.prototype,"makeObservable",{value:s,writable:!0,configurable:!0,enumerable:!1}),t(n.prototype),t(r.prototype),t(i.prototype);var h={isObservable:{value:!0,writable:!0,configurable:!0},makeObservable:{value:Function.noop,writable:!0,configurable:!0},reverse:{value:function(){var e=this.constructClone(this);return e.reverse(),this.swap(0,this.length,e),this},writable:!0,configurable:!0},sort:{value:function(){this.dispatchBeforeRangeChange(this,this,0);for(var e=0;this.length>e;e++)n.dispatchBeforeOwnPropertyChange(this,e,this[e]),this.dispatchBeforeMapChange(e,this[e]);o.apply(this,arguments);for(var e=0;this.length>e;e++)n.dispatchOwnPropertyChange(this,e,this[e]),this.dispatchMapChange(e,this[e]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},swap:{value:function(e,t,r){if(r?Array.isArray(r)||(r=a.call(r)):r=c,0>e)e=this.length+e;else if(e>this.length){for(var i=e-this.length,s=Array(i+r.length),o=0,u=i;r.length>o;o++,u++)o in r&&(s[u]=r[o]);r=s,e=this.length}var h;if(0===t){if(0===r.length)return[];h=c}else h=a.call(this,e,e+t);var d=r.length-h.length,p=this.length,f=Math.max(this.length+d,e+r.length),g=Math.max(p,f);if(d&&n.dispatchBeforeOwnPropertyChange(this,"length",this.length),this.dispatchBeforeRangeChange(r,h,e),0===d)for(var o=e;e+r.length>o;o++)n.dispatchBeforeOwnPropertyChange(this,o,this[o]),this.dispatchBeforeMapChange(o,this[o]);else if(n.hasOwnPropertyChangeDescriptor(this))for(var o=e;g>o;o++)n.dispatchBeforeOwnPropertyChange(this,o,this[o]),this.dispatchBeforeMapChange(o,this[o]);e>p&&(this.length=e);var m=l.call(this,e,t,r);if(0===d)for(var o=e;e+r.length>o;o++)n.dispatchOwnPropertyChange(this,o,this[o]),this.dispatchMapChange(o,this[o]);else if(n.hasOwnPropertyChangeDescriptor(this))for(var o=e;g>o;o++)n.dispatchOwnPropertyChange(this,o,this[o]),this.dispatchMapChange(o,this[o]);return this.dispatchRangeChange(r,h,e),d&&n.dispatchOwnPropertyChange(this,"length",this.length),m},writable:!0,configurable:!0},splice:{value:function(e,t){return e>this.length&&(e=this.length),this.swap.call(this,e,t,a.call(arguments,2))},writable:!0,configurable:!0},set:{value:function(e,t){return this.swap(e,e>=this.length?0:1,[t]),!0},writable:!0,configurable:!0},shift:{value:function(){return this.splice(0,1)[0]},writable:!0,configurable:!0},pop:{value:function(){return this.length?this.splice(this.length-1,1)[0]:void 0},writable:!0,configurable:!0},push:{value:function(e){if(1===arguments.length)return this.splice(this.length,0,e);var t=a.call(arguments);return this.swap(this.length,0,t)},writable:!0,configurable:!0},unshift:{value:function(e){if(1===arguments.length)return this.splice(0,0,e);var t=a.call(arguments);return this.swap(0,0,t)},writable:!0,configurable:!0},clear:{value:function(){return this.splice(0,this.length)},writable:!0,configurable:!0}},d=Object.create(Array.prototype,h)}});