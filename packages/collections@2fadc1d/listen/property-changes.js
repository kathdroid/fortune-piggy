function PropertyChanges(){throw Error("This is an abstract interface. Mix it. Don't construct it")}function dispatchEach(e,t,n){for(var r=e.active,i=e.current,a=r.length=i.length;a--;)r[a]=i[a];for(var a=0,s=r.length;s>a;a++){var o=r[a];if(0>i.indexOf(o))return;var l=o;if(o=o[e.specificHandlerMethodName]||o[e.genericHandlerMethodName]||o,!o.call)throw Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+o);o.call(l,n,t,this)}}require("../shim");var object_owns=Object.prototype.hasOwnProperty;module.exports=PropertyChanges,PropertyChanges.debug=!0,PropertyChanges.prototype.getOwnPropertyChangeDescriptor=function(e){this.__propertyChangeListeners__||Object.defineProperty(this,"__propertyChangeListeners__",{value:{},enumerable:!1,configurable:!0,writable:!0});var t=this.__propertyChangeListeners__;if(!object_owns.call(t,e)){var n=e+"";n=n&&n[0].toUpperCase()+n.slice(1),t[e]={willChangeListeners:{current:[],active:[],specificHandlerMethodName:"handle"+n+"WillChange",genericHandlerMethodName:"handlePropertyWillChange"},changeListeners:{current:[],active:[],specificHandlerMethodName:"handle"+n+"Change",genericHandlerMethodName:"handlePropertyChange"}}}return t[e]},PropertyChanges.prototype.hasOwnPropertyChangeDescriptor=function(e){if(!this.__propertyChangeListeners__)return!1;if(!e)return!0;var t=this.__propertyChangeListeners__;return object_owns.call(t,e)?!0:!1},PropertyChanges.prototype.addOwnPropertyChangeListener=function(e,t,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var r,i=PropertyChanges.getOwnPropertyChangeDescriptor(this,e);r=n?i.willChangeListeners:i.changeListeners,PropertyChanges.makePropertyObservable(this,e),r.current.push(t);var a=this;return function(){PropertyChanges.removeOwnPropertyChangeListener(a,e,t,n),a=null}},PropertyChanges.prototype.addBeforeOwnPropertyChangeListener=function(e,t){return PropertyChanges.addOwnPropertyChangeListener(this,e,t,!0)},PropertyChanges.prototype.removeOwnPropertyChangeListener=function(e,t,n){var r,i=PropertyChanges.getOwnPropertyChangeDescriptor(this,e);r=n?i.willChangeListeners:i.changeListeners;var a=r.current.lastIndexOf(t);if(-1===a)throw Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(e));r.current.splice(a,1)},PropertyChanges.prototype.removeBeforeOwnPropertyChangeListener=function(e,t){return PropertyChanges.removeOwnPropertyChangeListener(this,e,t,!0)},PropertyChanges.prototype.dispatchOwnPropertyChange=function(e,t,n){var r=PropertyChanges.getOwnPropertyChangeDescriptor(this,e);if(!r.isActive){r.isActive=!0;var i;i=n?r.willChangeListeners:r.changeListeners;try{dispatchEach.call(this,i,e,t)}finally{r.isActive=!1}}},PropertyChanges.prototype.dispatchBeforeOwnPropertyChange=function(e,t){return PropertyChanges.dispatchOwnPropertyChange(this,e,t,!0)},PropertyChanges.prototype.makePropertyObservable=function(e){if(!Array.isArray(this)){if(!Object.isExtensible(this,e))throw Error("Can't make property "+JSON.stringify(e)+" observable on "+this+" because object is not extensible");var t;"object"==typeof this.__state__?t=this.__state__:(t={},Object.isExtensible(this,"__state__")&&Object.defineProperty(this,"__state__",{value:t,writable:!0,enumerable:!1})),t[e]=this[e],this.__overriddenPropertyDescriptors__||(n={},Object.defineProperty(this,"__overriddenPropertyDescriptors__",{value:{},enumerable:!1,writable:!0,configurable:!0}));var n=this.__overriddenPropertyDescriptors__;if(!object_owns.call(n,e)){var r,i=this;Object.getOwnPropertyDescriptor(i,e);do{if(r=Object.getOwnPropertyDescriptor(i,e))break;i=Object.getPrototypeOf(i)}while(i);if(r=r||{value:void 0,enumerable:!0,writable:!0,configurable:!0},r.configurable&&(n[e]=r,r.writable||r.set)){var a;a="value"in r?{get:function(){return r.value},set:function(n){return n===r.value?n:(PropertyChanges.dispatchBeforeOwnPropertyChange(this,e,r.value),r.value=n,t[e]=n,PropertyChanges.dispatchOwnPropertyChange(this,e,n),n)},enumerable:r.enumerable,configurable:!0}:{get:function(){return r.get?r.get.apply(this,arguments):void 0},set:function(n){var i;return r.get&&(i=r.get.apply(this,arguments)),r.set&&r.set.apply(this,arguments),r.get&&(n=r.get.apply(this,arguments),t[e]=n),n===i?n:(PropertyChanges.dispatchBeforeOwnPropertyChange(this,e,i),PropertyChanges.dispatchOwnPropertyChange(this,e,n),n)},enumerable:r.enumerable,configurable:!0},Object.defineProperty(this,e,a)}}}},PropertyChanges.getOwnPropertyChangeDescriptor=function(e,t){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(t):PropertyChanges.prototype.getOwnPropertyChangeDescriptor.call(e,t)},PropertyChanges.hasOwnPropertyChangeDescriptor=function(e,t){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(t):PropertyChanges.prototype.hasOwnPropertyChangeDescriptor.call(e,t)},PropertyChanges.addOwnPropertyChangeListener=function(e,t,n,r){return Object.isObject(e)?e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(t,n,r):PropertyChanges.prototype.addOwnPropertyChangeListener.call(e,t,n,r):void 0},PropertyChanges.removeOwnPropertyChangeListener=function(e,t,n,r){return Object.isObject(e)?e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(t,n,r):PropertyChanges.prototype.removeOwnPropertyChangeListener.call(e,t,n,r):void 0},PropertyChanges.dispatchOwnPropertyChange=function(e,t,n,r){return Object.isObject(e)?e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(t,n,r):PropertyChanges.prototype.dispatchOwnPropertyChange.call(e,t,n,r):void 0},PropertyChanges.addBeforeOwnPropertyChangeListener=function(e,t,n){return PropertyChanges.addOwnPropertyChangeListener(e,t,n,!0)},PropertyChanges.removeBeforeOwnPropertyChangeListener=function(e,t,n){return PropertyChanges.removeOwnPropertyChangeListener(e,t,n,!0)},PropertyChanges.dispatchBeforeOwnPropertyChange=function(e,t,n){return PropertyChanges.dispatchOwnPropertyChange(e,t,n,!0)},PropertyChanges.makePropertyObservable=function(e,t){return e.makePropertyObservable?e.makePropertyObservable(t):PropertyChanges.prototype.makePropertyObservable.call(e,t)};