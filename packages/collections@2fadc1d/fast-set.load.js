montageDefine("2fadc1d","fast-set",{dependencies:["./shim","./dict","./list","./generic-collection","./generic-set","./tree-log","./listen/property-changes","fast-set"],factory:function(e,t,n){"use strict";function r(e,t,n,i){return this instanceof r?(t=t||Object.equals,n=n||Object.hash,i=i||Function.noop,this.contentEquals=t,this.contentHash=n,this.getDefault=i,this.buckets=new this.Buckets(null,this.Bucket),this.length=0,this.addEach(e),void 0):new r(e,t,n,i)}e("./shim");var i=e("./dict"),a=e("./list"),s=e("./generic-collection"),o=e("./generic-set"),l=e("./tree-log"),c=e("./listen/property-changes");Object.prototype.hasOwnProperty,n.exports=r,r.FastSet=r,Object.addEach(r.prototype,s.prototype),Object.addEach(r.prototype,o.prototype),Object.addEach(r.prototype,c.prototype),r.prototype.Buckets=i,r.prototype.Bucket=a,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},r.prototype.has=function(e){var t=this.contentHash(e);return this.buckets.get(t).has(e)},r.prototype.get=function(e,t){if(t)throw Error("FastSet#get does not support second argument: equals");var n=this.contentHash(e),r=this.buckets;return r.has(n)?r.get(n).get(e):this.getDefault(e)},r.prototype["delete"]=function(e,t){if(t)throw Error("FastSet#delete does not support second argument: equals");var n=this.contentHash(e),r=this.buckets;if(r.has(n)){var i=r.get(n);if(i["delete"](e))return this.length--,0===i.length&&r["delete"](n),!0}return!1},r.prototype.clear=function(){this.buckets.clear(),this.length=0},r.prototype.add=function(e){var t=this.contentHash(e),n=this.buckets;return n.has(t)||n.set(t,new this.Bucket(null,this.contentEquals)),n.get(t).has(e)?!1:(n.get(t).add(e),this.length++,!0)},r.prototype.reduce=function(e,t){var n=arguments[2],r=this.buckets,i=0;return r.reduce(function(t,r){return r.reduce(function(t,r){return e.call(n,t,r,i++,this)},t,this)},t,this)},r.prototype.one=function(){return this.length>0?this.buckets.one().one():void 0},r.prototype.iterate=function(){return this.buckets.values().flatten().iterate()},r.prototype.log=function(e,t,n,r){e=e||l.unicodeSharp,t=t||this.logNode,n||(n=console.log,r=console),n=n.bind(r);var i=this.buckets,a=i.keys();a.forEach(function(s,o){var l,c;o===a.length-1?(l=e.fromAbove,c=" "):0===o?(l=e.branchDown,c=e.strafe):(l=e.fromBoth,c=e.strafe);var u=i.get(s);n.call(r,l+e.through+e.branchDown+" "+s),u.forEach(function(i,a){var s,o;a===u.head.prev?(s=e.fromAbove,o=" "):(s=e.fromBoth,o=e.strafe);var l;t(a,function(t){l?n.call(r,c+" "+o+"  "+t):(n.call(r,c+" "+s+e.through+e.through+t),l=!0)},function(t){n.call(r,c+" "+e.strafe+"  "+t)})})})},r.prototype.logNode=function(e,t){var n=e.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+n)}}});